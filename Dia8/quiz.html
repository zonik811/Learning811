<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>D√≠a 8 - Evaluaci√≥n: Demuestra tu Conocimiento</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: linear-gradient(150deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
  color: #e8eaf6;
  padding: 20px;
  min-height: 100vh;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
}

/* Hero */
.hero {
  text-align: center;
  padding: 60px 20px;
  background: linear-gradient(135deg, rgba(102,126,234,0.15), rgba(118,75,162,0.15));
  border-radius: 20px;
  margin-bottom: 40px;
  border: 1px solid rgba(102,126,234,0.3);
}

.hero h1 {
  font-size: 3.5rem;
  background: linear-gradient(90deg, #667eea, #764ba2);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 20px;
}

.hero p {
  font-size: 1.3rem;
  color: #b8c1ec;
  max-width: 800px;
  margin: 0 auto;
}

/* Challenge Container */
.challenge-container {
  background: rgba(30,27,75,0.6);
  padding: 40px;
  border-radius: 16px;
  margin-bottom: 30px;
  border: 1px solid rgba(102,126,234,0.2);
}

.challenge {
  background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1));
  padding: 30px;
  border-radius: 12px;
  border: 2px solid rgba(102,126,234,0.3);
  margin-bottom: 30px;
  display: none;
}

.challenge.active {
  display: block;
  animation: slideIn 0.3s;
}

@keyframes slideIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.challenge-title {
  font-size: 1.6rem;
  color: #667eea;
  margin-bottom: 15px;
  font-weight: 700;
}

.challenge-description {
  font-size: 1.1rem;
  color: #d1d5f0;
  margin-bottom: 20px;
  line-height: 1.8;
}

.challenge-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin: 20px 0;
}

/* Code Editor */
.code-editor-section h4 {
  color: #a78bfa;
  margin-bottom: 10px;
  font-size: 1.1rem;
}

.code-editor {
  background: #0a0a14;
  border: 1px solid rgba(102,126,234,0.3);
  border-radius: 8px;
  padding: 15px;
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  color: #7dd3fc;
  line-height: 1.6;
  resize: vertical;
  min-height: 250px;
  width: 100%;
  box-sizing: border-box;
}

.code-editor:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 15px rgba(102,126,234,0.3);
}

.preview-section {
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(102,126,234,0.3);
  border-radius: 8px;
  padding: 20px;
  min-height: 250px;
  display: flex;
  flex-direction: column;
}

.preview-title {
  color: #a78bfa;
  margin-bottom: 15px;
  font-size: 1.1rem;
  font-weight: 600;
}

#preview {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

#preview > * {
  padding: 10px;
  border-radius: 6px;
  background: rgba(102,126,234,0.15);
  border: 1px solid rgba(102,126,234,0.3);
}

/* Botones */
.btn {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  padding: 12px 30px;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  margin: 5px;
}

.btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 5px 20px rgba(102,126,234,0.4);
}

.btn-success {
  background: linear-gradient(135deg, #4caf50, #43e97b);
}

.btn-danger {
  background: linear-gradient(135deg, #ff6b6b, #ff8e53);
}

/* Result Box */
.result-box {
  background: rgba(0, 0, 0, 0.3);
  border: 2px solid rgba(102,126,234,0.3);
  border-radius: 8px;
  padding: 15px;
  margin: 15px 0;
  min-height: 50px;
  display: flex;
  align-items: center;
  font-weight: 600;
  font-size: 1.05rem;
}

.result-box.success {
  border-color: #4caf50;
  background: rgba(76,175,80,0.15);
  color: #4caf50;
}

.result-box.error {
  border-color: #ff6b6b;
  background: rgba(255,107,107,0.15);
  color: #ff6b6b;
}

.result-box.pending {
  border-color: rgba(102,126,234,0.5);
  background: rgba(102,126,234,0.1);
  color: #a78bfa;
}

/* Progress */
.progress-container {
  background: rgba(102,126,234,0.1);
  border-radius: 10px;
  height: 40px;
  margin-bottom: 30px;
  display: flex;
  align-items: center;
  border: 1px solid rgba(102,126,234,0.3);
  overflow: hidden;
  position: relative;
}

.progress-fill {
  background: linear-gradient(90deg, #667eea, #764ba2);
  height: 100%;
  transition: width 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
  font-size: 0.95rem;
  min-width: 0;
}

.progress-text {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  color: white;
  font-weight: 700;
  z-index: 10;
  pointer-events: none;
}

/* Navigation */
.nav-buttons {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 30px;
  flex-wrap: wrap;
  gap: 10px;
}

/* Test Results */
.test-results {
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(102,126,234,0.3);
  border-radius: 8px;
  padding: 15px;
  margin-top: 15px;
  max-height: 200px;
  overflow-y: auto;
}

.test-item {
  padding: 8px 0;
  border-bottom: 1px solid rgba(102,126,234,0.2);
  font-size: 0.95rem;
  color: #d1d5f0;
}

.test-item.pass {
  color: #4caf50;
}

.test-item.fail {
  color: #ff6b6b;
}

@media (max-width: 1024px) {
  .challenge-grid {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 768px) {
  .hero h1 { font-size: 2.5rem; }
  .challenge-container { padding: 25px; }
}
</style>
</head>
<body>
<div class="container">

  <!-- Hero -->
  <div class="hero">
    <h1>üî• Evaluaci√≥n Final: Demuestra tu Conocimiento</h1>
    <p>Escribe c√≥digo real para resolver 4 desaf√≠os. Necesitas pasar 3 de 4 para completar el D√≠a 8.</p>
  </div>

  <!-- Challenge Container -->
  <div class="challenge-container">
    
    <!-- Progress Bar -->
    <div class="progress-container">
      <div class="progress-fill" id="progressFill" style="width: 0%;">
        <span id="progressPercent">0%</span>
      </div>
      <div class="progress-text">Desaf√≠os: <span id="progressScore">0</span>/4</div>
    </div>

    <!-- Desaf√≠o 1: Seleccionar y Modificar -->
    <div class="challenge active" id="challenge1">
      <div class="challenge-title">Desaf√≠o 1: Selecciona y Modifica</div>
      <div class="challenge-description">
        Escribe c√≥digo JavaScript que haga lo siguiente:
        <br>1. Selecciona todos los elementos con class "item"
        <br>2. Cambia su color de texto a azul (#667eea)
        <br>3. Agrega la clase "highlighted" a cada uno
      </div>

      <div class="challenge-grid">
        <div class="code-editor-section">
          <h4>üìù Escribe tu c√≥digo aqu√≠:</h4>
          <textarea class="code-editor" id="code1" placeholder="// Escribe tu c√≥digo aqu√≠
// Ejemplo: const items = document.querySelectorAll('.item');"></textarea>
          <button class="btn btn-success" onclick="testChallenge1()">Ejecutar C√≥digo</button>
        </div>
        
        <div class="preview-section">
          <div class="preview-title">üéØ Resultado esperado:</div>
          <div id="preview1">
            <div class="item" style="color: #d1d5f0;">Item 1</div>
            <div class="item" style="color: #d1d5f0;">Item 2</div>
            <div class="item" style="color: #d1d5f0;">Item 3</div>
          </div>
          <style>
            #preview1 .item.highlighted {
              color: #667eea;
              font-weight: bold;
            }
          </style>
        </div>
      </div>

      <div class="result-box pending" id="result1">
        Ejecuta tu c√≥digo para ver si cumple los requisitos
      </div>

      <div class="nav-buttons">
        <button class="btn btn-success" onclick="nextChallenge(2)">Siguiente ‚Üí</button>
      </div>
    </div>

    <!-- Desaf√≠o 2: Crear Elementos Din√°micamente -->
    <div class="challenge" id="challenge2">
      <div class="challenge-title">Desaf√≠o 2: Crea Elementos Din√°micamente</div>
      <div class="challenge-description">
        Escribe c√≥digo JavaScript que haga lo siguiente:
        <br>1. Crea 5 nuevos divs
        <br>2. Asigna a cada uno un texto "Elemento X" (donde X es el n√∫mero)
        <br>3. Agrega la clase "element" a cada uno
        <br>4. Ins√©rtalos en el contenedor #container2
      </div>

      <div class="challenge-grid">
        <div class="code-editor-section">
          <h4>üìù Escribe tu c√≥digo aqu√≠:</h4>
          <textarea class="code-editor" id="code2" placeholder="// Escribe tu c√≥digo aqu√≠
// Tip: Usa createElement() en un loop"></textarea>
          <button class="btn btn-success" onclick="testChallenge2()">Ejecutar C√≥digo</button>
        </div>
        
        <div class="preview-section">
          <div class="preview-title">üéØ Resultado esperado:</div>
          <div id="container2"></div>
          <style>
            #container2 .element {
              padding: 10px;
              margin: 5px 0;
              background: rgba(102,126,234,0.15);
              border: 1px solid rgba(102,126,234,0.3);
              border-radius: 6px;
            }
          </style>
        </div>
      </div>

      <div class="result-box pending" id="result2">
        Ejecuta tu c√≥digo para ver si cumple los requisitos
      </div>

      <div class="nav-buttons">
        <button class="btn" onclick="prevChallenge(1)">‚Üê Anterior</button>
        <button class="btn btn-success" onclick="nextChallenge(3)">Siguiente ‚Üí</button>
      </div>
    </div>

    <!-- Desaf√≠o 3: Filtrar Elementos -->
    <div class="challenge" id="challenge3">
      <div class="challenge-title">Desaf√≠o 3: Filtra y Oculta Elementos</div>
      <div class="challenge-description">
        Escribe c√≥digo JavaScript que haga lo siguiente:
        <br>1. Obt√©n todos los elementos con data-price
        <br>2. Oculta (display: none) los que tengan precio menor a 100
        <br>3. Cambia el color de los que tengan precio >= 100 a verde (#4caf50)
      </div>

      <div class="challenge-grid">
        <div class="code-editor-section">
          <h4>üìù Escribe tu c√≥digo aqu√≠:</h4>
          <textarea class="code-editor" id="code3" placeholder="// Escribe tu c√≥digo aqu√≠
// Tip: Usa getAttribute() para obtener data-price"></textarea>
          <button class="btn btn-success" onclick="testChallenge3()">Ejecutar C√≥digo</button>
        </div>
        
        <div class="preview-section">
          <div class="preview-title">üéØ Resultado esperado:</div>
          <div id="preview3">
            <div data-price="50">Producto: $50 (debe ocultarse)</div>
            <div data-price="120">Producto: $120 (debe ser verde)</div>
            <div data-price="80">Producto: $80 (debe ocultarse)</div>
            <div data-price="150">Producto: $150 (debe ser verde)</div>
          </div>
          <style>
            #preview3 div {
              padding: 10px;
              margin: 5px 0;
              background: rgba(102,126,234,0.15);
              border-radius: 6px;
              color: #d1d5f0;
            }
          </style>
        </div>
      </div>

      <div class="result-box pending" id="result3">
        Ejecuta tu c√≥digo para ver si cumple los requisitos
      </div>

      <div class="nav-buttons">
        <button class="btn" onclick="prevChallenge(2)">‚Üê Anterior</button>
        <button class="btn btn-success" onclick="nextChallenge(4)">Siguiente ‚Üí</button>
      </div>
    </div>

    <!-- Desaf√≠o 4: Event Delegation y Manipulaci√≥n Avanzada -->
    <div class="challenge" id="challenge4">
      <div class="challenge-title">Desaf√≠o 4: Delegaci√≥n de Eventos Avanzada</div>
      <div class="challenge-description">
        Escribe c√≥digo JavaScript que haga lo siguiente:
        <br>1. Agrega un evento delegado al #container4 que escuche clics en .btn-action
        <br>2. Cuando se hace clic, agrega la clase "active" al bot√≥n
        <br>3. Cambia el texto del bot√≥n a "Activado ‚úì"
        <br>4. Cambia el fondo a verde (#4caf50)
      </div>

      <div class="challenge-grid">
        <div class="code-editor-section">
          <h4>üìù Escribe tu c√≥digo aqu√≠:</h4>
          <textarea class="code-editor" id="code4" placeholder="// Escribe tu c√≥digo aqu√≠
// Tip: Usa addEventListener en #container4"></textarea>
          <button class="btn btn-success" onclick="testChallenge4()">Ejecutar C√≥digo</button>
        </div>
        
        <div class="preview-section">
          <div class="preview-title">üéØ Haz clic en los botones:</div>
          <div id="container4">
            <button class="btn-action" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; margin: 5px;">Bot√≥n 1</button>
            <button class="btn-action" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; margin: 5px;">Bot√≥n 2</button>
            <button class="btn-action" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; margin: 5px;">Bot√≥n 3</button>
          </div>
        </div>
      </div>

      <div class="result-box pending" id="result4">
        Ejecuta tu c√≥digo para ver si cumple los requisitos
      </div>

      <div class="nav-buttons">
        <button class="btn" onclick="prevChallenge(3)">‚Üê Anterior</button>
        <button class="btn btn-success" onclick="submitEvaluation()">Enviar Evaluaci√≥n</button>
      </div>
    </div>

  </div>

</div>

<script>
let challengeScores = {
  1: false,
  2: false,
  3: false,
  4: false
};

function updateProgress() {
  const completedCount = Object.values(challengeScores).filter(v => v).length;
  const percentage = (completedCount / 4) * 100;
  document.getElementById('progressFill').style.width = percentage + '%';
  document.getElementById('progressPercent').textContent = Math.round(percentage) + '%';
  document.getElementById('progressScore').textContent = completedCount;
}

// Desaf√≠o 1: Seleccionar y Modificar
function testChallenge1() {
  try {
    const preview = document.getElementById('preview1');
    const items = preview.querySelectorAll('.item');
    const code = document.getElementById('code1').value;
    
    // Ejecutar el c√≥digo del usuario en el contexto del preview
    const userFunction = new Function('document', code);
    userFunction(preview);
    
    // Validar resultados
    let pass = true;
    items.forEach(item => {
      if(!item.classList.contains('highlighted') || item.style.color !== 'rgb(102, 126, 234)') {
        pass = false;
      }
    });
    
    const result = document.getElementById('result1');
    if(pass) {
      result.className = 'result-box success';
      result.textContent = '‚úÖ ¬°Correcto! Seleccionaste, modificaste colores y agregaste clases.';
      challengeScores[1] = true;
    } else {
      result.className = 'result-box error';
      result.textContent = '‚ùå No cumple todos los requisitos. Verifica el color y las clases.';
      challengeScores[1] = false;
    }
    updateProgress();
  } catch(e) {
    document.getElementById('result1').className = 'result-box error';
    document.getElementById('result1').textContent = '‚ùå Error en el c√≥digo: ' + e.message;
    challengeScores[1] = false;
    updateProgress();
  }
}

// Desaf√≠o 2: Crear Elementos
function testChallenge2() {
  try {
    const container = document.getElementById('container2');
    container.innerHTML = ''; // Limpiar
    const code = document.getElementById('code2').value;
    
    const userFunction = new Function('document', code);
    userFunction(document);
    
    const elements = container.querySelectorAll('.element');
    const result = document.getElementById('result2');
    
    if(elements.length === 5) {
      result.className = 'result-box success';
      result.textContent = '‚úÖ ¬°Correcto! Creaste 5 elementos din√°micamente.';
      challengeScores[2] = true;
    } else {
      result.className = 'result-box error';
      result.textContent = `‚ùå Creaste ${elements.length} elementos, pero se esperaban 5.`;
      challengeScores[2] = false;
    }
    updateProgress();
  } catch(e) {
    document.getElementById('result2').className = 'result-box error';
    document.getElementById('result2').textContent = '‚ùå Error en el c√≥digo: ' + e.message;
    challengeScores[2] = false;
    updateProgress();
  }
}

// Desaf√≠o 3: Filtrar
function testChallenge3() {
  try {
    const preview = document.getElementById('preview3');
    const items = preview.querySelectorAll('[data-price]');
    const code = document.getElementById('code3').value;
    
    // Resetear estilos
    items.forEach(item => {
      item.style.display = '';
      item.style.color = '';
    });
    
    const userFunction = new Function('document', code);
    userFunction(preview);
    
    // Validar
    let pass = true;
    items.forEach(item => {
      const price = parseInt(item.getAttribute('data-price'));
      if(price < 100 && item.style.display !== 'none') pass = false;
      if(price >= 100 && item.style.color !== 'rgb(76, 175, 80)') pass = false;
    });
    
    const result = document.getElementById('result3');
    if(pass) {
      result.className = 'result-box success';
      result.textContent = '‚úÖ ¬°Correcto! Filtraste y coloreaste los elementos correctamente.';
      challengeScores[3] = true;
    } else {
      result.className = 'result-box error';
      result.textContent = '‚ùå No cumple todos los requisitos. Verifica ocultos y colores.';
      challengeScores[3] = false;
    }
    updateProgress();
  } catch(e) {
    document.getElementById('result3').className = 'result-box error';
    document.getElementById('result3').textContent = '‚ùå Error en el c√≥digo: ' + e.message;
    challengeScores[3] = false;
    updateProgress();
  }
}

// Desaf√≠o 4: Delegaci√≥n
function testChallenge4() {
  try {
    const container = document.getElementById('container4');
    const code = document.getElementById('code4').value;
    
    // Resetear botones
    const buttons = container.querySelectorAll('.btn-action');
    buttons.forEach(btn => {
      btn.classList.remove('active');
      btn.textContent = 'Bot√≥n ' + (Array.from(buttons).indexOf(btn) + 1);
      btn.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
    });
    
    const userFunction = new Function('document', code);
    userFunction(document);
    
    // Simular clicks para validar
    let workingButtons = 0;
    buttons.forEach(btn => {
      btn.click();
      if(btn.classList.contains('active') && btn.textContent.includes('Activado')) {
        workingButtons++;
      }
    });
    
    const result = document.getElementById('result4');
    if(workingButtons === buttons.length) {
      result.className = 'result-box success';
      result.textContent = `‚úÖ ¬°Correcto! Implementaste delegaci√≥n de eventos correctamente (${workingButtons}/3 botones activados).`;
      challengeScores[4] = true;
    } else {
      result.className = 'result-box error';
      result.textContent = `‚ùå Solo ${workingButtons}/3 botones funcionan. Verifica tu delegaci√≥n.`;
      challengeScores[4] = false;
    }
    updateProgress();
  } catch(e) {
    document.getElementById('result4').className = 'result-box error';
    document.getElementById('result4').textContent = '‚ùå Error en el c√≥digo: ' + e.message;
    challengeScores[4] = false;
    updateProgress();
  }
}

// Navegaci√≥n
function nextChallenge(num) {
  document.querySelectorAll('.challenge').forEach(ch => ch.classList.remove('active'));
  document.getElementById('challenge' + num).classList.add('active');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function prevChallenge(num) {
  document.querySelectorAll('.challenge').forEach(ch => ch.classList.remove('active'));
  document.getElementById('challenge' + num).classList.add('active');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Submit
function submitEvaluation() {
  const completedCount = Object.values(challengeScores).filter(v => v).length;
  
  if(completedCount >= 3) {
    alert(`¬°Excelente! Completaste ${completedCount}/4 desaf√≠os correctamente.\n¬°Has aprobado el D√≠a 8! üéâ`);
    
    const completedDays = JSON.parse(localStorage.getItem('completedDays') || '[]');
    if(!completedDays.includes(8)) {
      completedDays.push(8);
      localStorage.setItem('completedDays', JSON.stringify(completedDays));
    }
    
    window.location.href = 'inicio_curso.html';
  } else {
    alert(`Completaste ${completedCount}/4 desaf√≠os.\nNecesitas 3 para aprobar. ¬°Intenta de nuevo!`);
  }
}

updateProgress();
</script>
</body>
</html>
