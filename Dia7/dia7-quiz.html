<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D√≠a 7 - Quiz Final: Funciones, Condicionales y Loops</title>
    <link rel="stylesheet" href="../Css/global2.css">
    <style>
        .quiz-header {
            background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(240,147,251,0.1));
            padding: 48px;
            border-radius: 16px;
            text-align: center;
            margin-bottom: 48px;
            border: 2px solid rgba(102,126,234,0.3);
        }

        .quiz-title {
            font-size: 48px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #f093fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 16px;
        }

        .quiz-subtitle {
            font-size: 18px;
            color: rgba(255,255,255,0.8);
            margin-bottom: 12px;
        }

        .quiz-icon {
            font-size: 80px;
            margin-bottom: 24px;
        }

        .quiz-instructions {
            background: rgba(102,126,234,0.1);
            border-left: 4px solid #667eea;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 32px;
            font-size: 14px;
            line-height: 1.8;
        }

        .question-card {
            background: rgba(30,30,30,0.95);
            padding: 24px;
            border-radius: 12px;
            border-left: 4px solid var(--color-primary);
            margin-bottom: 24px;
        }

        .question-number {
            font-size: 16px;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 12px;
        }

        .question-text {
            font-size: 15px;
            font-weight: 600;
            color: white;
            margin-bottom: 16px;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .option {
            background: rgba(50,50,50,0.95);
            border: 2px solid rgba(102,126,234,0.2);
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            color: rgba(255,255,255,0.8);
        }

        .option:hover {
            border-color: #667eea;
            background: rgba(102,126,234,0.1);
        }

        .option.selected {
            border-color: #667eea;
            background: rgba(102,126,234,0.2);
            color: white;
        }

        .option.correct {
            border-color: #48bb78;
            background: rgba(72,187,120,0.2);
            color: #48bb78;
        }

        .option.incorrect {
            border-color: #f56565;
            background: rgba(245,101,101,0.2);
            color: #f56565;
        }

        .button-container {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn-check {
            background: #667eea;
            color: white;
            flex: 1;
            min-width: 150px;
        }

        .btn-check:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102,126,234,0.4);
        }

        .btn-next {
            background: #48bb78;
            color: white;
            flex: 1;
            min-width: 150px;
        }

        .btn-next:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(72,187,120,0.4);
        }

        .btn-submit {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            width: 100%;
            padding: 16px;
            font-size: 16px;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102,126,234,0.4);
        }

        .progress-bar {
            background: rgba(50,50,50,0.8);
            height: 8px;
            border-radius: 4px;
            margin-bottom: 24px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #f093fb);
            transition: width 0.3s;
        }

        .score-section {
            display: none;
            text-align: center;
            padding: 48px;
            background: linear-gradient(135deg, rgba(72,187,120,0.1), rgba(102,126,234,0.1));
            border-radius: 16px;
            border: 2px solid rgba(102,126,234,0.3);
            margin: 48px 0;
        }

        .score-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .final-score {
            font-size: 72px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #f093fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 24px 0;
        }

        .final-message {
            font-size: 28px;
            font-weight: 700;
            color: white;
            margin-bottom: 16px;
        }

        .final-details {
            font-size: 16px;
            color: rgba(255,255,255,0.8);
            margin-bottom: 32px;
            line-height: 1.8;
        }

        .emoji-celebration {
            font-size: 64px;
            margin: 24px 0;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .stars {
            font-size: 48px;
            margin: 16px 0;
        }

        .next-section-button {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 18px 48px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            text-decoration: none;
            transition: all 0.3s;
        }

        .next-section-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102,126,234,0.4);
        }

        .feedback-message {
            margin-top: 12px;
            padding: 16px;
            border-radius: 8px;
            font-size: 14px;
            display: none;
        }

        .feedback-correct {
            background: rgba(72,187,120,0.2);
            padding: 16px;
            border-radius: 8px;
            border-left: 3px solid #48bb78;
            display: block;
        }

        .feedback-incorrect {
            background: rgba(245,101,101,0.2);
            padding: 16px;
            border-radius: 8px;
            border-left: 3px solid #f56565;
            display: block;
        }

        @media (max-width: 768px) {
            .quiz-title {
                font-size: 36px;
            }

            .final-score {
                font-size: 48px;
            }

            .final-message {
                font-size: 22px;
            }
        }
    </style>
</head>
<body>
    <div class="background-animation"></div>
    
    <div class="container">
        <!-- Header -->
        <div class="quiz-header">
            <div class="quiz-icon">üéØ</div>
            <h1 class="quiz-title">Quiz Final: D√≠a 7</h1>
            <p class="quiz-subtitle">Funciones, Condicionales y Loops</p>
            <p style="color: rgba(255,255,255,0.7); font-size: 14px; line-height: 1.8;">
                ¬°Has llegado al final del D√≠a 7! Este quiz eval√∫a tu comprensi√≥n de Funciones, Condicionales y Loops. 
                Tienes 10 preguntas. Necesitas 70% para pasar. ¬°Buena suerte! üöÄ
            </p>
        </div>

        <!-- Instrucciones -->
        <div class="quiz-instructions">
            <strong>üìù Instrucciones:</strong>
            <ul style="margin: 8px 0 0 0; padding-left: 20px;">
                <li>Tienes <strong>10 preguntas</strong> sobre lo aprendido en el D√≠a 7</li>
                <li>Selecciona la respuesta correcta para cada pregunta</li>
                <li>Haz clic en "Verificar" para confirmar tu respuesta</li>
                <li>Al final, ver√°s tu puntuaci√≥n y retroalimentaci√≥n detallada</li>
                <li>Necesitas <strong>70% o m√°s</strong> para pasar (7 de 10)</li>
            </ul>
        </div>

        <!-- Barra de Progreso -->
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <!-- Quiz Container -->
        <div id="quizContainer"></div>

        <!-- Score Section -->
        <div class="score-section" id="scoreSection">
            <div class="emoji-celebration" id="emoji">üéâ</div>
            <div class="final-message" id="finalMessage"></div>
            <div class="final-score" id="finalScore"></div>
            <div class="stars" id="stars"></div>
            <div class="final-details" id="finalDetails"></div>
            <a href="../menu.html" class="next-section-button">
                ‚úÖ Volver al Men√∫
            </a>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "¬øCu√°l es la forma CORRECTA de declarar una funci√≥n?",
                options: [
                    "const suma = function(a, b) { return a + b; };",
                    "const suma = (a, b) => a + b;",
                    "Ambas son correctas",
                    "Ninguna es correcta"
                ],
                correct: 2,
                explanation: "Ambas formas son correctas en JavaScript moderno. La primera es Funci√≥n Expresi√≥n, la segunda es Arrow Function. Usa la que prefieras, pero Arrow es m√°s moderna y concisa."
            },
            {
                question: "¬øQu√© retorna una funci√≥n si no tiene 'return'?",
                options: [
                    "null",
                    "undefined",
                    "0",
                    "Error"
                ],
                correct: 1,
                explanation: "Sin 'return', la funci√≥n retorna autom√°ticamente 'undefined'. Esto es importante saberlo para evitar bugs en tu c√≥digo."
            },
            {
                question: "¬øCu√°l es el resultado de: 5 === '5'?",
                options: [
                    "true",
                    "false",
                    "Error",
                    "undefined"
                ],
                correct: 1,
                explanation: "'===' verifica tipo y valor. 5 (n√∫mero) !== '5' (string). Resultado: false. Usa '===' en lugar de '==' siempre que puedas para mayor precisi√≥n."
            },
            {
                question: "¬øQu√© hace 'break' en un loop?",
                options: [
                    "Pausa el loop",
                    "Sale del loop completamente",
                    "Salta a la siguiente iteraci√≥n",
                    "Reinicia el loop"
                ],
                correct: 1,
                explanation: "'break' termina el loop inmediatamente. 'continue' salta a la siguiente iteraci√≥n. Son fundamentales para controlar el flujo de loops."
            },
            {
                question: "¬øCu√°l es la salida?: for (let i = 0; i < 3; i++) { console.log(i); }",
                options: [
                    "0, 1, 2, 3",
                    "1, 2, 3",
                    "0, 1, 2",
                    "No imprime nada"
                ],
                correct: 2,
                explanation: "El loop comienza en 0 y contin√∫a mientras i < 3. Imprime: 0, 1, 2. El 3 no se incluye porque la condici√≥n es i < 3, no i <= 3."
            },
            {
                question: "¬øCu√°l es la diferencia entre 'let' y 'const' en una funci√≥n?",
                options: [
                    "No hay diferencia",
                    "'let' puede cambiar, 'const' no",
                    "'const' es m√°s lento",
                    "'let' solo existe en funciones"
                ],
                correct: 1,
                explanation: "'let' permite reasignar valores. 'const' no. En funciones, ambos tienen scope local. La mejor pr√°ctica es usar 'const' por defecto, 'let' si necesitas cambiar."
            },
            {
                question: "¬øQu√© es una arrow function?",
                options: [
                    "Una funci√≥n que retorna un array",
                    "Sintaxis moderna usando '=>' para definir funciones",
                    "Una funci√≥n que apunta a otra funci√≥n",
                    "Un operador de comparaci√≥n"
                ],
                correct: 1,
                explanation: "Arrow functions son: const func = (a, b) => a + b; Es sintaxis moderna y concisa. Son las favoritas en JavaScript moderno por su claridad."
            },
            {
                question: "¬øCu√°ntas veces se ejecuta este loop?: for (let i = 1; i <= 5; i++) { }",
                options: [
                    "4 veces",
                    "5 veces",
                    "6 veces",
                    "Infinitamente"
                ],
                correct: 1,
                explanation: "Desde i=1 hasta i<=5 (inclusive). Son 5 iteraciones: 1, 2, 3, 4, 5. La condici√≥n '<=' incluye el 5, por eso son 5 veces, no 4."
            },
            {
                question: "¬øCu√°l es el mejor uso de 'forEach'?",
                options: [
                    "Cuando necesitas el √≠ndice",
                    "Cuando necesitas usar 'break'",
                    "Cuando quieres iterar sobre todos los elementos de un array",
                    "Cuando necesitas crear un nuevo array"
                ],
                correct: 2,
                explanation: "'forEach' es ideal para procesar cada elemento sin efectos secundarios. Para 'break' usa 'for'. Para nuevo array usa 'map'. Para filtrar usa 'filter'."
            },
            {
                question: "¬øQu√© retorna: const resultado = (10 > 5) ? 'S√≠' : 'No'; console.log(resultado)?",
                options: [
                    "true",
                    "'S√≠'",
                    "'No'",
                    "undefined"
                ],
                correct: 1,
                explanation: "El operador ternario: (condici√≥n) ? valorSiVerdadero : valorSiFalso. 10 > 5 es true, retorna 'S√≠'. Es √∫til para condicionales simples en una l√≠nea."
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        const userAnswers = new Array(questions.length).fill(null);
        let answered = new Array(questions.length).fill(false);

        function renderQuestion() {
            const container = document.getElementById('quizContainer');
            const question = questions[currentQuestion];

            if (currentQuestion < questions.length) {
                container.innerHTML = `
                    <div class="question-card">
                        <div class="question-number">Pregunta ${currentQuestion + 1} de ${questions.length}</div>
                        <div class="question-text">${question.question}</div>
                        <div class="options" id="optionsContainer">
                            ${question.options.map((opt, idx) => `
                                <div class="option ${userAnswers[currentQuestion] === idx ? 'selected' : ''}" onclick="selectOption(${idx})" id="option-${idx}">
                                    <strong>${String.fromCharCode(65 + idx)})</strong> ${opt}
                                </div>
                            `).join('')}
                        </div>
                        <div class="feedback-message" id="feedback"></div>
                        <div class="button-container">
                            ${!answered[currentQuestion] ? `<button class="btn-check" onclick="confirmAnswer()">‚úì Confirmar</button>` : ''}
                            ${currentQuestion > 0 ? '<button class="btn-next" onclick="previousQuestion()">‚Üê Anterior</button>' : ''}
                            ${answered[currentQuestion] && currentQuestion < questions.length - 1 ? '<button class="btn-next" onclick="nextQuestion()">Siguiente ‚Üí</button>' : ''}
                            ${answered[currentQuestion] && currentQuestion === questions.length - 1 ? '<button class="btn-submit" onclick="showResults()">üèÅ Ver Resultados</button>' : ''}
                        </div>
                    </div>
                `;
            }

            updateProgress();
        }

        function selectOption(idx) {
            if (answered[currentQuestion]) return;
            
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            document.getElementById(`option-${idx}`).classList.add('selected');
            userAnswers[currentQuestion] = idx;
            
            // MOSTRAR RETROALIMENTACI√ìN INMEDIATA
            showImmediateFeedback(idx);
        }

        function showImmediateFeedback(selectedIdx) {
            const question = questions[currentQuestion];
            const isCorrect = selectedIdx === question.correct;
            const feedback = document.getElementById('feedback');
            
            if (isCorrect) {
                feedback.innerHTML = `
                    <div style="background: rgba(72,187,120,0.2); padding: 16px; border-radius: 8px; border-left: 4px solid #48bb78;">
                        <strong style="color: #48bb78; font-size: 15px;">‚úÖ ¬°CORRECTO!</strong>
                        <p style="margin: 12px 0 0 0; font-size: 14px; color: rgba(255,255,255,0.9); line-height: 1.6;">
                            ${question.explanation}
                        </p>
                        <p style="margin: 12px 0 0 0; font-size: 13px; color: #48bb78; font-weight: 600;">
                            ‚ú® ¬°Excelente comprensi√≥n del concepto!
                        </p>
                    </div>
                `;
                feedback.classList.add('feedback-correct');
            } else {
                feedback.innerHTML = `
                    <div style="background: rgba(245,101,101,0.2); padding: 16px; border-radius: 8px; border-left: 4px solid #f56565;">
                        <strong style="color: #f56565; font-size: 15px;">‚ö†Ô∏è NO ES CORRECTO</strong>
                        <p style="margin: 8px 0 0 0; font-size: 13px; color: rgba(255,255,255,0.8);">
                            Seleccionaste: <strong>${question.options[selectedIdx]}</strong>
                        </p>
                        <p style="margin: 12px 0 0 0; font-size: 13px; color: rgba(255,255,255,0.8); padding: 10px; background: rgba(0,0,0,0.3); border-radius: 6px;">
                            La respuesta correcta es: <strong style="color: #48bb78;">${question.options[question.correct]}</strong>
                        </p>
                        <p style="margin: 12px 0 0 0; font-size: 13px; color: rgba(255,255,255,0.85); line-height: 1.6;">
                            <strong>üìö Aprende:</strong> ${question.explanation}
                        </p>
                    </div>
                `;
                feedback.classList.add('feedback-incorrect');
            }
        }

        function confirmAnswer() {
            if (userAnswers[currentQuestion] === null) {
                alert('Por favor selecciona una respuesta');
                return;
            }

            const isCorrect = userAnswers[currentQuestion] === questions[currentQuestion].correct;
            if (isCorrect) {
                score++;
            }

            answered[currentQuestion] = true;
            
            // Desactivar bot√≥n de confirmar y mostrar botones de navegaci√≥n
            renderQuestion();
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuestion();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
            }
        }

        function updateProgress() {
            const percentage = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = percentage + '%';
        }

        // CONFETI - Efecto profesional
        function createConfetti() {
            const canvas = document.createElement('canvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            canvas.style.position = 'fixed';
            canvas.style.top = '0';
            canvas.style.left = '0';
            canvas.style.pointerEvents = 'none';
            canvas.style.zIndex = '9999';
            document.body.appendChild(canvas);

            const ctx = canvas.getContext('2d');
            const particles = [];

            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = -10;
                    this.vx = (Math.random() - 0.5) * 8;
                    this.vy = Math.random() * 5 + 3;
                    this.size = Math.random() * 5 + 2;
                    this.color = ['#667eea', '#f093fb', '#48bb78', '#f56565', '#ffd700', '#00ffff'][Math.floor(Math.random() * 6)];
                    this.rotation = Math.random() * 360;
                    this.rotationSpeed = (Math.random() - 0.5) * 10;
                    this.opacity = 1;
                }

                update() {
                    this.x += this.vx;
                    this.y += this.vy;
                    this.vy += 0.1;
                    this.rotation += this.rotationSpeed;
                    this.opacity -= 0.01;
                }

                draw() {
                    ctx.save();
                    ctx.globalAlpha = this.opacity;
                    ctx.translate(this.x, this.y);
                    ctx.rotate((this.rotation * Math.PI) / 180);
                    ctx.fillStyle = this.color;
                    ctx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size);
                    ctx.restore();
                }
            }

            for (let i = 0; i < 150; i++) {
                particles.push(new Particle());
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                for (let i = particles.length - 1; i >= 0; i--) {
                    particles[i].update();
                    particles[i].draw();

                    if (particles[i].y > canvas.height || particles[i].opacity <= 0) {
                        particles.splice(i, 1);
                    }
                }

                if (particles.length > 0) {
                    requestAnimationFrame(animate);
                } else {
                    canvas.remove();
                }
            }

            animate();
        }

        function showResults() {
            const scorePercentage = (score / questions.length) * 100;
            const passed = scorePercentage >= 70;

            // Guardar en localStorage
            let daysCompleted = JSON.parse(localStorage.getItem('daysCompleted')) || {};

            daysCompleted['dia7'] = {
                completed: true,
                passed: passed,
                score: score,
                totalQuestions: questions.length,
                percentage: Math.round(scorePercentage),
                date: new Date().toLocaleDateString('es-ES')
            };

            localStorage.setItem('daysCompleted', JSON.stringify(daysCompleted));

            // LANZAR CONFETI si pasa
            if (passed) {
                createConfetti();
            }

            document.getElementById('quizContainer').style.display = 'none';

            let emoji, message, details, detailedFeedback;

            if (scorePercentage === 100) {
                emoji = 'üåü';
                message = '¬°PERFECTO! ¬°Eres una ESTRELLA! üåü';
                details = `Obtuviste <strong>${score} de ${questions.length} preguntas correctas</strong> (100%)<br>¬°Dominas completamente el D√≠a 7!<br>Est√°s listo para Arrays, Objetos y m√°s.`;
                detailedFeedback = `
                    <div style="background: rgba(72,187,120,0.1); border: 2px solid #48bb78; padding: 20px; border-radius: 12px; margin-top: 20px;">
                        <strong style="color: #48bb78; font-size: 16px;">üéì RETROALIMENTACI√ìN DETALLADA:</strong>
                        <ul style="margin: 12px 0 0 0; padding-left: 20px; font-size: 14px; color: rgba(255,255,255,0.8); line-height: 1.8;">
                            <li><strong>‚úÖ Dominio de Funciones:</strong> Excelente - Entiendes perfectamente declaraci√≥n, par√°metros y return</li>
                            <li><strong>‚úÖ Condicionales:</strong> Excelente - Manejo impecable de if/else y operador ternario</li>
                            <li><strong>‚úÖ Loops:</strong> Excelente - Comprensi√≥n perfecta de for, while, forEach y control de flujo</li>
                            <li><strong>üöÄ Pr√≥ximo paso:</strong> Est√°s completamente listo para Arrays, Objetos y manipulaci√≥n del DOM. ¬°Felicidades!</li>
                        </ul>
                    </div>
                `;
            } else if (scorePercentage >= 85) {
                emoji = 'üéâ';
                message = '¬°EXCELENTE! ¬°Lo hiciste muy bien! üéä';
                details = `Obtuviste <strong>${score} de ${questions.length} preguntas correctas</strong> (${Math.round(scorePercentage)}%)<br>¬°Tienes una comprensi√≥n s√≥lida del D√≠a 7!<br>Est√°s muy preparado para continuar.`;
                detailedFeedback = `
                    <div style="background: rgba(102,126,234,0.1); border: 2px solid #667eea; padding: 20px; border-radius: 12px; margin-top: 20px;">
                        <strong style="color: #667eea; font-size: 16px;">üéì RETROALIMENTACI√ìN DETALLADA:</strong>
                        <ul style="margin: 12px 0 0 0; padding-left: 20px; font-size: 14px; color: rgba(255,255,255,0.8); line-height: 1.8;">
                            <li><strong>‚úÖ Dominio de Funciones:</strong> Muy bueno - Tienes claros la mayor√≠a de conceptos fundamentales</li>
                            <li><strong>‚úÖ Condicionales:</strong> Muy bueno - Comprendes bien if/else, switch y ternario</li>
                            <li><strong>‚úÖ Loops:</strong> Muy bueno - Manejo muy s√≥lido de for, while y forEach</li>
                            <li><strong>üìå Puntos a mejorar:</strong> Repasa los operadores === vs == para mayor precisi√≥n en tus comparaciones</li>
                            <li><strong>üöÄ Pr√≥ximo paso:</strong> Est√°s listo para Arrays y Objetos. ¬°Sigue adelante con confianza!</li>
                        </ul>
                    </div>
                `;
            } else if (scorePercentage >= 70) {
                emoji = 'üëè';
                message = '¬°BIEN! ¬°Pasaste el D√≠a 7! üëè';
                details = `Obtuviste <strong>${score} de ${questions.length} preguntas correctas</strong> (${Math.round(scorePercentage)}%)<br>¬°Completaste los objetivos m√≠nimos!<br>Puedes revisar los temas si quieres reforzar.`;
                detailedFeedback = `
                    <div style="background: rgba(240,147,251,0.1); border: 2px solid #f093fb; padding: 20px; border-radius: 12px; margin-top: 20px;">
                        <strong style="color: #f093fb; font-size: 16px;">üéì RETROALIMENTACI√ìN DETALLADA:</strong>
                        <ul style="margin: 12px 0 0 0; padding-left: 20px; font-size: 14px; color: rgba(255,255,255,0.8); line-height: 1.8;">
                            <li><strong>‚ö†Ô∏è Dominio de Funciones:</strong> Bueno - Comprendes lo b√°sico, pero hay conceptos a reforzar como par√°metros</li>
                            <li><strong>‚úÖ Condicionales:</strong> Bueno - Manejo decente de if/else</li>
                            <li><strong>‚ö†Ô∏è Loops:</strong> Necesita refuerzo - Algunos conceptos de loops no est√°n del todo claros</li>
                            <li><strong>üìö Recomendaci√≥n:</strong> Revisa los m√≥dulos 1, 2 y 3 antes de continuar. La pr√°ctica es clave.</li>
                            <li><strong>üöÄ Pr√≥ximo paso:</strong> Puedes continuar con Arrays, pero practica m√°s los loops y funciones</li>
                        </ul>
                    </div>
                `;
            } else {
                emoji = 'üí™';
                message = '¬°Casi lo logras! No pasaste esta vez. üí™';
                details = `Obtuviste <strong>${score} de ${questions.length} preguntas correctas</strong> (${Math.round(scorePercentage)}%)<br>Necesitabas 70% (7 preguntas) para pasar.<br><strong>Te recomendamos revisar los m√≥dulos e intentar de nuevo.</strong>`;
                detailedFeedback = `
                    <div style="background: rgba(245,101,101,0.1); border: 2px solid #f56565; padding: 20px; border-radius: 12px; margin-top: 20px;">
                        <strong style="color: #f56565; font-size: 16px;">üéì RETROALIMENTACI√ìN DETALLADA:</strong>
                        <ul style="margin: 12px 0 0 0; padding-left: 20px; font-size: 14px; color: rgba(255,255,255,0.8); line-height: 1.8;">
                            <li><strong>‚ùå Dominio de Funciones:</strong> Necesita refuerzo importante - Revisa par√°metros, argumentos y return</li>
                            <li><strong>‚ùå Condicionales:</strong> Necesita refuerzo importante - Estudia if/else, switch y operadores l√≥gicos</li>
                            <li><strong>‚ùå Loops:</strong> Necesita refuerzo importante - Los loops requieren mucha m√°s pr√°ctica</li>
                            <li><strong>üö® ACCI√ìN URGENTE:</strong> Revisa TODOS los m√≥dulos del D√≠a 7 paso a paso. Haz todos los ejercicios.</li>
                            <li><strong>üîÑ Pr√≥ximo paso:</strong> Intenta el quiz nuevamente despu√©s de estudiar y practicar con los ejercicios</li>
                        </ul>
                    </div>
                `;
            }

            document.getElementById('emoji').textContent = emoji;
            document.getElementById('finalMessage').textContent = message;
            document.getElementById('finalScore').textContent = `${score}/${questions.length}`;
            document.getElementById('finalDetails').innerHTML = details + detailedFeedback;

            // Stars
            let stars;
            if (scorePercentage === 100) {
                stars = '‚≠ê‚≠ê‚≠ê';
            } else if (scorePercentage >= 85) {
                stars = '‚≠ê‚≠ê';
            } else if (scorePercentage >= 70) {
                stars = '‚≠ê';
            } else {
                stars = '‚ùå';
            }
            document.getElementById('stars').textContent = stars;

            document.getElementById('scoreSection').classList.add('active');
        }

        // Inicializar
        renderQuestion();
    </script>

</body>
</html>
